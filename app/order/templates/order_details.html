{% extends 'base.html' %}
{% load sass_tags %}
{% load mathfilters %}
{% load static %}

{% block title %}Order Details{% endblock %}
{% block head_imports %}
    <link href="{% sass_src 'scss/pages/order_details.scss' %}" rel="stylesheet" type="text/css" />
{% endblock %}

{% block content %}
    {% include "parts/nav_b.html" with nav_title="Order Details" %}
    
    <main>
        <div class="order-info">
            <div class="info-holder">
                <p class="descr">Order Number:</p>
                <p class="text">{{ order.id }}</p>
            </div>
            <div class="info-holder">
                <p class="descr">Order Date:</p>
                <p class="text">{{ order.ordered_date|date:"j F Y, l H:i" }}</p>
            </div>
            <div class="info-holder">
                <p class="descr">Order Summary:</p>
                <p class="text">[2] deliveries, {{ order.get_total_quantity }} products</p>
            </div>
            <div class="info-holder">
                <p class="descr">Total:</p>
                <div class="price">
                    <p class="currency total">$</p>
                    <p class="value total">{{ order.get_total_price }}2</p>
                </div>
            </div>
        </div>

        <div class="order-details-card">
            <div class="order-details-head">
                <div class="left-area">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 473.8 473.8" style="enable-background:new 0 0 473.8 473.8;" xml:space="preserve" class="filled iconic del-icon">
                        <g>
                            <path d="M454.8,111.7c0-1.8-0.4-3.6-1.2-5.3c-1.6-3.4-4.7-5.7-8.1-6.4L241.8,1.2c-3.3-1.6-7.2-1.6-10.5,0L25.6,100.9   c-4,1.9-6.6,5.9-6.8,10.4v0.1c0,0.1,0,0.2,0,0.4V362c0,4.6,2.6,8.8,6.8,10.8l205.7,99.7c0.1,0,0.1,0,0.2,0.1   c0.3,0.1,0.6,0.2,0.9,0.4c0.1,0,0.2,0.1,0.4,0.1c0.3,0.1,0.6,0.2,0.9,0.3c0.1,0,0.2,0.1,0.3,0.1c0.3,0.1,0.7,0.1,1,0.2   c0.1,0,0.2,0,0.3,0c0.4,0,0.9,0.1,1.3,0.1c0.4,0,0.9,0,1.3-0.1c0.1,0,0.2,0,0.3,0c0.3,0,0.7-0.1,1-0.2c0.1,0,0.2-0.1,0.3-0.1   c0.3-0.1,0.6-0.2,0.9-0.3c0.1,0,0.2-0.1,0.4-0.1c0.3-0.1,0.6-0.2,0.9-0.4c0.1,0,0.1,0,0.2-0.1l206.3-100c4.1-2,6.8-6.2,6.8-10.8   V112C454.8,111.9,454.8,111.8,454.8,111.7z M236.5,25.3l178.4,86.5l-65.7,31.9L170.8,57.2L236.5,25.3z M236.5,198.3L58.1,111.8   l85.2-41.3L321.7,157L236.5,198.3z M42.8,131.1l181.7,88.1v223.3L42.8,354.4V131.1z M248.5,442.5V219.2l85.3-41.4v58.4   c0,6.6,5.4,12,12,12s12-5.4,12-12v-70.1l73-35.4V354L248.5,442.5z"/>
                        </g>
                    </svg>
                    <p class="head">Delivery</p>
                </div>
                <div class="right-area">
                    <div class="info-holder">
                        <p class="descr">No:</p>
                        <p class="text">[123123123421]</p>
                    </div>
                </div>
            </div>
            <div class="delivery-status">
                <div class="order-tracking completed">
                    <span class="is-complete"></span>
                    <p>Packing<br><span>17/11/2020</span></p>
                </div>
                <div class="order-tracking completed">
                    <span class="is-complete"></span>
                    <p>Shipping<br><span>20/11/2020</span></p>
                </div>
                <div class="order-tracking">
                    <span class="is-complete"></span>
                    <p>Arriving<br><span>24/12/2020</span></p>
                </div>
                <div class="order-tracking">
                    <span class="is-complete"></span>
                    <p>Success<br><span>05/01/2021</span></p>
                </div>
            </div>
            <div class="vendors">
                <div class="holder">
                    <div class="info-line">
                        <div class="left-area">
                            <svg viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg" class="outlined iconic store-icon">
                                <title>Store</title>
                                <path d="M48,139.58816V208a8,8,0,0,0,8,8H200a8,8,0,0,0,8-8V139.58972"></path>
                                <path d="M54.03441,40H201.96559a8,8,0,0,1,7.69219,5.80223L224,96H32L46.34222,45.80223A8,8,0,0,1,54.03441,40Z"></path>
                                <path d="M96,96v16a32,32,0,0,1-64,0V96"></path>
                                <path d="M160,96v16a32,32,0,0,1-64,0V96"></path>
                                <path d="M224,96v16a32,32,0,0,1-64,0V96"></path>
                            </svg>
                            <a href="" class="next-h-link">
                                <p class="link-h-txt">Nice Memory</p>
                                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="chevron-right outlined">
                                    <title>Go to Store</title>
                                    <path d="M9 5l7 7-7 7"></path>
                                </svg>
                            </a>
                        </div>
                        <div class="right-area">
                            <a href="" class="small-btn"><p>Contact</p></a>
                        </div>
                    </div>
                    <div class="info-line">
                        <div class="left-area">
                            <svg viewBox="0 0 24 24" class="outlined iconic">
                                <title>Shipping Firm</title>
                                <path d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z" />
                                <path d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0" />
                            </svg>
                            <p class="link-h-txt">UPS</p>
                        </div>
                        <div class="right-area">
                            <a href="" class="small-btn"><p>Tracking</p></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="order-details-container">
                {% for order_item in order.items.all %}
                    <div class="sprod-item">
                        <a class="item-img-link" href="{{ order_item.product.get_absolute_url }}">
                            <img src="{{ order_item.product.image.url }}" class="prod-img" alt="{{ order_item.product.title }}">
                        </a>
                        <div class="item-content">
                            <div class="item-f-row">
                                <div class="item-info">
                                    <h1 class="item-h1">{{ order_item.product.title }}</h1>
                                    <h2 class="item-h2">{{ order_item.product.brand }}</h2>
                                    {# Temporary needs to be corrected #}
                                    <p class="item-p">Details: <span>Detail</span></p>
                                    <p class="item-p">Price was: <span>{{ order_item.price }}</span></p>
                                </div>
                            </div>
                            <div class="price">
                                <p class="currency">$</p>
                                <p class="value">
                                    {{ order_item.actual_price|div:order_item.quantity }}
                                    <span class="qty">x{{ order_item.quantity }}</span>
                                </p>
                            </div>
                            <a href="{{ order_item.product.get_absolute_url }}" class="small-btn"><p>Review</p></a>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div class="vendors">
                <div class="holder">
                    <div class="info-line">
                        <div class="left-area">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="outlined ionicons-outlined iconic">
                                <title>Receipt</title>
                                <path d="M160 336V48l32 16 32-16 31.94 16 32.37-16L320 64l31.79-16 31.93 16L416 48l32.01 16L480 48v224"/>
                                <path d="M480 272v112a80 80 0 01-80 80h0a80 80 0 01-80-80v-48H48a15.86 15.86 0 00-16 16c0 64 6.74 112 80 112h288" />
                                <path d="M224 144h192M288 224h128"/>
                            </svg>
                            <a href="" class="next-h-link">
                                <p class="link-h-txt">Get Receipt</p>
                                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="chevron-right outlined">
                                    <title>Get Receipt</title>
                                    <path d="M9 5l7 7-7 7"></path>
                                </svg>
                            </a>
                        </div>
                    </div>
                    <div class="info-line">
                        <div class="left-area">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="ionicons-outlined iconic red-txt">
                                <title>Dispute</title>
                                <path d="M256 80c-8.66 0-16.58 7.36-16 16l8 216a8 8 0 008 8h0a8 8 0 008-8l8-216c.58-8.64-7.34-16-16-16z" />
                                <circle cx="256" cy="416" r="16" />
                            </svg>
                            <a href="" class="next-h-link">
                                <p class="link-h-txt red-txt">Open Dispute</p>
                                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="chevron-right outlined red-txt">
                                    <title>Open Dispute</title>
                                    <path d="M9 5l7 7-7 7"></path>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>            
        </div>

        <div class="order-details-card">
            <div class="order-details-head">
                <div class="left-area">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="outlined iconic">
                        <path d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z" />
                        <path d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0" />
                    </svg>
                    <p class="head">Shipping Address</p>
                </div>
            </div>
            <div class="order-details-container">
                <div class="info-holder">
                    <p class="descr">Customer:</p>
                    <p class="text">{{order.first_name}} {{order.last_name}}</p>
                </div>
                <p class="descr">{{ order.address }}</p>
                <p class="descr">{{order.city}}, {{order.country}}, {{ order.zipcode }}</p>
            </div>
        </div>

        <div class="order-details-card">
            <div class="order-details-head">
                <div class="left-area">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="outlined iconic">
                        <path d="M2 7a2 2 0 012-2h16a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2V7z"/>
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M2 9v0a4 4 0 004-4v0"/>
                        <path d="M18 19v0a4 4 0 014-4v0"/>
                    </svg>
                    <p class="head">Payment Information</p>
                </div>
                <div class="right-area">
                    <div class="info-holder">
                        <p class="descr">**** **** **** 1232</p>
                    </div>
                </div>
            </div>
            <div class="order-details-container">
                <div class="info-holder">
                    <p class="descr">Subtotal</p>
                    <div class="right-area">
                        <p class="currency">$</p>
                        <p class="value">{{ order.get_subtotal_price|floatformat:2 }}</p>
                    </div>
                </div>
                <div class="info-holder">
                    <p class="descr">Shipping</p>
                    <div class="right-area">
                        <p class="currency">$</p>
                        <p class="value">[10.00]</p>
                    </div>
                </div>
                <div class="info-holder">
                    <p class="descr">Tax</p>
                    <div class="right-area">
                        <p class="currency">$</p>
                        <p class="value">[11.40]</p>
                    </div>
                </div>
                <div class="info-holder" id="discount">
                    <p class="descr discount">Discount</p>
                    <div class="right-area">
                        <p class="sign discount">-</p>
                        <p class="currency discount">$</p>
                        <p class="value discount">{{ order.get_discount|floatformat:2  }}</p>
                    </div>
                </div>
                <div class="info-holder total-info" id="discount">
                    <p class="descr">Total</p>
                    <div class="right-area">
                        <p class="currency">$</p>
                        <p class="value">{{ order.get_total_price|floatformat:2  }}</p>
                    </div>
                </div>
            </div>
        </div>
    </main>
{% endblock %}